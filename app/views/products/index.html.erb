<h1>Listing products</h1>

<table>
  <tr>
    <th>Title</th>
    <th>Description</th>
    <th>Image</th>
    <th>Price</th>
    <th>Quantity</th>    
  </tr>

<% @products.each do |product| %>
  <tr>
    <td><%= product.title %></td>
    <td><%= product.description %></td>
    <td><%= product.image %></td>
    <td><%= product.price %></td>
    <td><%= product.quantity %></td>
    <td><%= link_to 'Show', product %></td>
    <td><%= link_to 'Edit', edit_product_path(product) %></td>
    <td><%= link_to 'Destroy', product, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
<% end %>
</table>

<br />
<p><b>Use of relationships </b></p>
<% @products.each do |product| %>
	<% unless product.orders.empty? %>
		<% product.orders.each do |order| %>
			<%= product.title %> was bought by <%= order.customer.name %><br />
		<% end %>
	<% else %>
		<p> <%= product.title %> hasn't been bought yet </p>
	<% end %>
<% end %>

<%= link_to 'New Product', new_product_path %>
